---
title: zip伪加密
date: 2017-11-2
tag: [CTF]
categories: CTF
---

> zip伪加密是在压缩源文件目录区的加密标志位做修改,进而再打开文件时识被别为加密压缩包而无法解密.

当我使用**fcrackzip**来暴力解密一个压缩文件时，出现了：
<!-- more -->
```python
no usable files found
```
在这个时候猜测这是一个伪加密的zip文件，利用**UltraEdit**来以十六进制打开这个压缩文件。
![Alt text](http://image-1252432001.coscd.myqcloud.com/zip1.png)

- 50 4B 03 04：这是头文件标记 (这里属于压缩源文件数据区)
- 14 00：解压文件所需 pkware 版本
- 00 08：全局方式位标记（有无加密）
- 08 00：压缩方式

伪加密在```50 4B 01 02```目录中文件文件头中做改动，这是zip压缩源文件目录区，含义和压缩源文件数据区差不多(**略有不同**)。

通过编辑器找到```50 4B 01 02```，文件中有两处，而压缩文件中正好有两个文件：
![Alt text](http://image-1252432001.coscd.myqcloud.com/zip2.png)

可以看到在```14 00```后它的标记为 ```09 08 ``` 为加密方式，将其改为```00 00``` 即可变为无加密，另一个同理可得。
